<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
	<!-- JQuery Setup -->
	<script src="http://code.jquery.com/jquery-latest.min.js"></script>
	<script type="text/javascript">
	
		//아래 버튼 클릭했을 때 호출되는 메소드로
		//Ajax기술을 이용하여 서블릿(서버페이지)으로 요청후 응답을 받아 처리함.
		function fn_process() {
			
			$.ajax({
				/* 속성명1 : 값1, 속성명2 : 값2, ... */
				type : "post",		// 서버페이지로 요청하는 방식(get 또는 post)
				async : true,		// 서버페이지로 요청시 true인 경우 비동기식으로 처리한다는 의미
				url : "http://localhost:8080/pro14/ajaxTest2",	// 요청할 서버페이지의 주소값	//ajaxTest2은 서블릿 맵핑주소값
				datatype : "xml",	// 서버페이지로부터 응답받을 데이터 형식
				success : function(info,textStatus) { 	//서버에 요청통신에 성공했을 때...
														//서버페이지로부터 데이터를 매개변수로 응답받아 처리
														
							//AjaxTest2서블릿으로부터 XML데이터를 응답받은 후
							//제이쿼리의 find()메소드를 이용하여 <title>, <writer>, <image>태그 이름으로
							//접근하여 각각의 도서 정보를 가져온다.
							$(info).find("book").each(function() {
								
								var title = $(this).find("title").text();
								var writer = $(this).find("writer").text();
								var image = $(this).find("image").text();
								
								//id속성값이 "bookInfo"인 <div>요소를 선택해서 가져와서
								//그 영역에 도서 정보를 표시한다.
								$("#bookInfo").append(
										"<p>" + title + "</p>" +
										"<p>" + writer + "</p>" +
										"<img src=" + image + "/>"
								);
								
							});
				},
				error : function(data, textStatus) {	//서버페이지로 요청과 응답에 실패했을 때 호출되는 콜백함수
							alert("에러가 발생했습니다");
				},
				
			});	//$.ajax();함수 끝
			
		}//fn_process()함수 끝
		
		
		$(function() {
			//사용자가 입력한 ID와 DB에 저장된 ID가 중복되었는지 판단하는 요청
			//DB에 게시판 글을 조회하는 요청
			$.ajax({
				
			});
		});
	
	</script>
</head>
<body>
	
	<!-- 서버페이지로(jsp페이지 또는 서블릿으로) 요청한 후 응답받은 데이터내용을 출력할 DIV영역 -->
	<div id="bookInfo"></div>
	<br><br>
	<input type="button" value="도서정보요청" onclick="fn_process();">
	
</body>
</html>
